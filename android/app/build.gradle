// ì´ íŒŒì¼ì˜ ë‚´ìš©ì„ ê·¸ëŒ€ë¡œ ë³µì‚¬í•´ì„œ ì‚¬ìš©í•˜ì„¸ìš”.

apply plugin: "com.android.application"
apply plugin: "org.jetbrains.kotlin.android" // ìµœì‹  ë¼ì´ë¸ŒëŸ¬ë¦¬ í˜¸í™˜ì„±ì„ ìœ„í•´ ìœ ì§€í•©ë‹ˆë‹¤.
apply plugin: "com.facebook.react"
// vector-icons í°íŠ¸ ì„¤ì •ì„ ê¸°ì¡´ íŒŒì¼ì—ì„œ ê°€ì ¸ì˜µë‹ˆë‹¤.
apply from: "../../node_modules/react-native-vector-icons/fonts.gradle"

/**
 * This is the configuration block to customize your React Native Android app.
 * By default you don't need to apply any configuration, just uncomment the lines you need.
 */
react {
    // ì´ ë¶€ë¶„ì€ ê¸°ë³¸ ì„¤ì •ì„ ê·¸ëŒ€ë¡œ ì‚¬ìš©í•©ë‹ˆë‹¤.
}

/**
 * ë¦´ë¦¬ì¦ˆ ë¹Œë“œ ì‹œ Proguard(ì½”ë“œ ì¶•ì†Œ/ë‚œë…í™”)ë¥¼ í™œì„±í™”í•©ë‹ˆë‹¤.
 * ê¸°ì¡´ ì„¤ì •ì„ ë”°ë¼ 'true'ë¡œ ìœ ì§€í•©ë‹ˆë‹¤.
 */
def enableProguardInReleaseBuilds = true

/**
 * JavaScriptCore (JSC)ì˜ ë¹Œë“œ ë²„ì „ì„ ì„¤ì •í•©ë‹ˆë‹¤.
 */
def jscFlavor = 'org.webkit:android-jsc:+'

android {

      // ğŸš© [ì¶”ê°€] ì´ì „ ë²„ì „ì˜ íŒŒì¼ ì´ë¦„ ìë™ ìƒì„± ë¡œì§
    applicationVariants.all { variant ->
        variant.outputs.all { output ->
            def formattedDate = new Date().format('dd_MM')
            def versionName = variant.versionName
            def versionCode = variant.versionCode
            def nameFile = output.outputFile.name
            def extension = nameFile.substring(nameFile.lastIndexOf("."));
            def name = "NB_MB_ParkingPark " +  formattedDate + " " + versionName +  "(" + versionCode + ")"
            nameFile = nameFile.replace("app-release", name)
            output.outputFileName  = nameFile
        }
    }
    // NDK, ë¹Œë“œ ë„êµ¬, ì»´íŒŒì¼ SDK ë²„ì „ì€ ìƒˆ íŒŒì¼ì˜ ë°©ì‹ì„ ë”°ë¦…ë‹ˆë‹¤.
    // ì´ ê°’ë“¤ì€ ë£¨íŠ¸ì˜ build.gradleì—ì„œ ê´€ë¦¬ë©ë‹ˆë‹¤.
    ndkVersion rootProject.ext.ndkVersion
    buildToolsVersion rootProject.ext.buildToolsVersion
    compileSdk rootProject.ext.compileSdkVersion

    // namespaceì™€ applicationIdëŠ” ê¸°ì¡´ ì„¤ì •ì„ ê·¸ëŒ€ë¡œ ê°€ì ¸ì˜µë‹ˆë‹¤. (ê°€ì¥ ì¤‘ìš”)
    namespace "kr.wisemobile.parking"
    defaultConfig {
        applicationId "kr.wisemobile.parking"
        minSdk rootProject.ext.minSdkVersion
        targetSdk rootProject.ext.targetSdkVersion
        // ë²„ì „ ì •ë³´ë„ ê¸°ì¡´ ì„¤ì •ì„ ê·¸ëŒ€ë¡œ ê°€ì ¸ì˜µë‹ˆë‹¤.
        versionCode 465
        versionName "3.4.4"
    }

    // ì„œëª… ì„¤ì •ì€ ê¸°ì¡´ ì„¤ì •ì„ ê·¸ëŒ€ë¡œ ê°€ì ¸ì˜µë‹ˆë‹¤.
    signingConfigs {
        release {
            if (project.hasProperty('MYAPP_RELEASE_STORE_FILE')) {
                storeFile file(MYAPP_RELEASE_STORE_FILE)
                storePassword MYAPP_RELEASE_STORE_PASSWORD
                keyAlias MYAPP_RELEASE_KEY_ALIAS
                keyPassword MYAPP_RELEASE_KEY_PASSWORD
            }
        }
        debug {
            storeFile file('debug.keystore')
            storePassword 'android'
            keyAlias 'androiddebugkey'
            keyPassword 'android'
        }
    }

    // ë¹Œë“œ íƒ€ì… ì„¤ì •ë„ ê¸°ì¡´ ì„¤ì •ì„ ë°˜ì˜í•˜ì—¬ ìˆ˜ì •í•©ë‹ˆë‹¤.
    buildTypes {
        debug {
            signingConfig signingConfigs.debug
        }
        release {
            crunchPngs false  // ğŸš© [ì¶”ê°€] PNG ì••ì¶• ë¹„í™œì„±í™”
            signingConfig signingConfigs.release // ë¦´ë¦¬ì¦ˆ ì„œëª…ì„ ì‚¬ìš©í•˜ë„ë¡ ìˆ˜ì •
            minifyEnabled enableProguardInReleaseBuilds
            proguardFiles getDefaultProguardFile("proguard-android.txt"), "proguard-rules.pro"
        }
    }

    // ğŸš© [ì¶”ê°€] ì´ì „ ë²„ì „ì˜ ABI ë¶„ë¦¬ ë¡œì§
    applicationVariants.all { variant ->
        variant.outputs.each { output ->
            def versionCodes = ["armeabi-v7a": 1, "x86": 2, "arm64-v8a": 3, "x86_64": 4]
            def abi = output.getFilter(com.android.build.OutputFile.ABI)
            if (abi != null) {
                output.versionCodeOverride =
                        defaultConfig.versionCode * 1000 + versionCodes.get(abi)
            }
        }
    }

      // ğŸš© [ì¶”ê°€] ì´ì „ ë²„ì „ì˜ ë¼ì´ë¸ŒëŸ¬ë¦¬ ì¶©ëŒ ë°©ì§€ ë¡œì§
    packagingOptions {
        jniLibs {
            useLegacyPackaging true
        }
        pickFirst 'lib/x86/libc++_shared.so'
        pickFirst 'lib/x86_64/libjsc.so'
        pickFirst 'lib/arm64-v8a/libjsc.so'
        pickFirst 'lib/arm64-v8a/libc++_shared.so'
        pickFirst 'lib/x86_64/libc++_shared.so'
        pickFirst 'lib/armeabi-v7a/libc++_shared.so'
    }

}

dependencies {
    // ìƒˆ íŒŒì¼ì˜ ê¸°ë³¸ ë¦¬ì•¡íŠ¸ ë„¤ì´í‹°ë¸Œ ì˜ì¡´ì„±ì„ ìœ ì§€í•©ë‹ˆë‹¤.
    // The version of react-native is set by the React Native Gradle Plugin
    implementation("com.facebook.react:react-android")

    if (hermesEnabled.toBoolean()) {
        implementation("com.facebook.react:hermes-android")
    } else {
        implementation jscFlavor
    }

    // ê¸°ì¡´ íŒŒì¼ì— ìˆë˜ ì»¤ìŠ¤í…€ ì˜ì¡´ì„±ë“¤ì„ ëª¨ë‘ ì¶”ê°€í•©ë‹ˆë‹¤.
    implementation "androidx.swiperefreshlayout:swiperefreshlayout:1.1.0"
    implementation project(':react-native-bootsplash')
    implementation "com.kakao.sdk:v2-navi:2.13.0"
    implementation 'com.tnkfactory:pub:7.21.7'
    implementation 'com.google.android.gms:play-services-location:21.0.1'
    implementation "androidx.core:core-splashscreen:1.0.0"
    implementation 'com.google.code.gson:gson:2.8.5'
    implementation 'com.facebook.fresco:fresco:3.1.3'
    implementation 'com.facebook.fresco:drawee:3.1.3'
    implementation 'com.facebook.fresco:imagepipeline:3.1.3'
    implementation project(':react-native-mail')
    implementation project(':react-native-sms')
    implementation project(':react-native-webview')
    implementation "com.google.android.gms:play-services-ads-identifier:18.0.1"
    implementation project(':react-native-video')

}

apply plugin: 'com.google.gms.google-services'
// ë„¤ì´í‹°ë¸Œ ëª¨ë“ˆ ì„¤ì •ì„ ë¶ˆëŸ¬ì˜¤ëŠ” ë¶€ë¶„ì€ ìƒˆ íŒŒì¼ì˜ ë°©ì‹(ë§¨ ì•„ë˜ ìœ„ì¹˜)ì„ ë”°ë¦…ë‹ˆë‹¤.
apply from: file("../../node_modules/@react-native-community/cli-platform-android/native_modules.gradle"); applyNativeModulesAppBuildGradle(project)

// ğŸš© [ì¶”ê°€] vector-icons í°íŠ¸ ì„¤ì •
project.ext.vectoricons = [
    iconFontNames: [ 'MaterialCommunityIcons.ttf' ]
]